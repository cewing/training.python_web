<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.9.1: http://docutils.sourceforge.net/" />
<meta name="version" content="S5 1.1" />
<title>Web Service API Addenda</title>
<link rel="stylesheet" href="ui/uw_pce_theme/pretty.css" type="text/css" />
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<script src="ui/uw_pce_theme/slides.js" type="text/javascript"></script>
<link rel="stylesheet" href="ui/uw_pce_theme/slides.css"
      type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="ui/uw_pce_theme/outline.css"
      type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="ui/uw_pce_theme/print.css"
      type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="ui/uw_pce_theme/opera.css"
      type="text/css" media="projection" id="operaFix" />
</head>
<body>
<div class="layout">
<div id="controls"></div>
<div id="currentSlide"></div>
<div id="header">

</div>
<div id="footer">
<h1>Web Service API Addenda</h1>
<h2><a class="reference external" href="http://github.com/cewing/training.python_web">View document source</a>.
</h2>
</div>
</div>
<div class="presentation">
<div class="slide" id="slide0">
<h1 class="title">Web Service API Addenda</h1>

<p>The following are provided as self-directed exercises. We just don't have the
time to cover them in depth in class.</p>

</div>
<div class="slide" id="xml-rpc">
<h1>XML-RPC</h1>
<p>Examples of XML-RPC using the Python Standard Library</p>
</div>
<div class="slide" id="xml-rpc-example-server">
<h1>XML-RPC Example - Server</h1>
<p>xmlrpc_server.py:</p>
<pre class="code python small literal-block">
<span class="kn">from</span> <span class="nn">SimpleXMLRPCServer</span> <span class="kn">import</span> <span class="n">SimpleXMLRPCServer</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">SimpleXMLRPCServer</span><span class="p">((</span><span class="s">'localhost'</span><span class="p">,</span> <span class="mi">50000</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
<span class="n">server</span><span class="o">.</span><span class="n">register_function</span><span class="p">(</span><span class="n">multiply</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Use Ctrl-C to Exit&quot;</span>
    <span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Exiting&quot;</span>
</pre>
</div>
<div class="slide" id="xml-rpc-example-client">
<h1>XML-RPC Example - Client</h1>
<p>We can run a client from a terminal. First, open one terminal and run the
xmlrpc_server.py script:</p>
<blockquote>
$ python xmlrcp_server.py</blockquote>
<p>Then, open another terminal and start up python:</p>
<pre class="code python small literal-block">
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">xmlrpclib</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">proxy</span> <span class="o">=</span> <span class="n">xmlrpclib</span><span class="o">.</span><span class="n">ServerProxy</span><span class="p">(</span><span class="s">'http://localhost:50000'</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">proxy</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
<span class="o">...</span>
<span class="mi">72</span>
</pre>
</div>
<div class="slide" id="xml-rpc-request">
<h1>XML-RPC Request</h1>
<p><tt class="docutils literal">verbose=True</tt> allows us to see the request we sent:</p>
<pre class="tiny literal-block">
POST /RPC2 HTTP/1.0
Host: localhost:50000
User-Agent: xmlrpclib.py/1.0.1 (by www.pythonware.com)
Content-Type: text/xml
Content-Length: 192

&lt;?xml version='1.0'?&gt;
&lt;methodCall&gt;
 &lt;methodName&gt;multiply&lt;/methodName&gt;
 &lt;params&gt;
  &lt;param&gt;
   &lt;value&gt;&lt;int&gt;3&lt;/int&gt;&lt;/value&gt;
  &lt;/param&gt;
  &lt;param&gt;
   &lt;value&gt;&lt;int&gt;24&lt;/int&gt;&lt;/value&gt;
  &lt;/param&gt;
 &lt;/params&gt;
&lt;/methodCall&gt;
</pre>
</div>
<div class="slide" id="xml-rpc-response">
<h1>XML-RPC Response</h1>
<p>and we can see the response, too:</p>
<pre class="tiny literal-block">
HTTP/1.0 200 OK
Server: BaseHTTP/0.3 Python/2.6.1
Date: Sun, 13 Jan 2013 03:38:00 GMT
Content-type: text/xml
Content-length: 121

&lt;?xml version='1.0'?&gt;
&lt;methodResponse&gt;
 &lt;params&gt;
  &lt;param&gt;
   &lt;value&gt;&lt;int&gt;72&lt;/int&gt;&lt;/value&gt;
  &lt;/param&gt;
 &lt;/params&gt;
&lt;/methodResponse&gt;
</pre>
</div>
<div class="slide" id="more-xml-rpc">
<h1>More XML-RPC</h1>
<p>Register an entire Python class as a service, exposing class methods:</p>
<pre class="literal-block">
server.register_instance(MyClass())
</pre>
<p>Keep an instance method private    :</p>
<pre class="code python tiny literal-block">
<span class="k">class</span> <span class="nc">MyServiceClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="k">def</span> <span class="nf">public_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;this method is public&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_private_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;this method is private because it starts with '_'
        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</pre>
</div>
<div class="slide" id="xml-rpc-introspection">
<h1>XML-RPC Introspection</h1>
<p>First, implement required methods on your service class:</p>
<pre class="code python tiny literal-block">
<span class="kn">from</span> <span class="nn">SimpleXMLRPCServer</span> <span class="kn">import</span> <span class="n">list_public_methods</span>

<span class="k">class</span> <span class="nc">MyServiceClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="k">def</span> <span class="nf">_listMethods</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;custom logic for presenting method names to users

        list_public_methods is a convenience function from the Python
        library, but you can make your own logic if you wish.
        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">list_public_methods</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_methodHelp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;provide help text for an individual method
        &quot;&quot;&quot;</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">__doc__</span>
</pre>
</div>
<div class="slide" id="id1">
<h1>XML-RPC Introspection</h1>
<p>Then enable introspection via the server instance:</p>
<pre class="code python small literal-block">
<span class="n">server</span><span class="o">.</span><span class="n">register_introspection_functions</span><span class="p">()</span>
</pre>
<p>After this, a client proxy can call pre-defined methods to learn about what
your service offers:</p>
<pre class="code python small literal-block">
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">proxy</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">listMethods</span><span class="p">():</span>
<span class="o">...</span>     <span class="n">help</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">methodHelp</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">name</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">&quot;</span><span class="se">\t</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">help</span>
<span class="o">...</span>
<span class="n">public_method</span>
    <span class="n">this</span> <span class="n">method</span> <span class="ow">is</span> <span class="n">public</span>
</pre>
</div>
<div class="slide" id="introspection-question">
<h1>Introspection Question</h1>
<p>I told you when we added the <tt class="docutils literal">_private_method</tt> that any method that any
method whose name starts with <tt class="docutils literal">_</tt> would be <strong>private</strong>.</p>
<p class="incremental">But we also added a <tt class="docutils literal">_listMethods</tt> method and a <tt class="docutils literal">_methodHelp</tt> method and
<em>those</em> methods are listed when you run <tt class="docutils literal">proxy.system.listMethods()</tt></p>
<p class="incremental">Why is this?</p>
<p class="incremental">For a complete discussion of this, read <a class="reference external" href="http://pymotw.com/2/SimpleXMLRPCServer/index.html#introspection-api">this MOTW post</a></p>
</div>
<div class="slide" id="soap">
<h1>SOAP</h1>
<p>Example of Using SOAP via the <tt class="docutils literal">suds</tt> package</p>
</div>
<div class="slide" id="install-suds">
<h1>Install Suds</h1>
<ul class="simple">
<li>Quit your python interpreter if you have it running.</li>
<li>If you see (soupenv) at your command line prompt, cool.</li>
<li>If you do not, type <tt class="docutils literal">source /path/to/soupenv/bin/activate</tt></li>
<li>Windows folks: <tt class="docutils literal">&gt; \path\to\soupenv\Scripts\activate</tt></li>
<li>Once activated: <tt class="docutils literal">pip install suds</tt></li>
</ul>
</div>
<div class="slide" id="creating-a-suds-client">
<h1>Creating a Suds Client</h1>
<p>Suds allows us to create a SOAP client object. SOAP uses WSDL to define a
service. All we need to do to set this up in python is load the URL of the
WSDL for the service we want to use:</p>
<pre class="code python small literal-block">
<span class="p">(</span><span class="n">soupenv</span><span class="p">)</span><span class="err">$</span> <span class="n">python</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">suds.client</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">geo_client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="s">'https://geoservices.tamu.edu/Services/Geocode/WebService/GeocoderService_V03_01.asmx?wsdl'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">geo_client</span>
<span class="o">&lt;</span><span class="n">suds</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">Client</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x10041fc10</span><span class="o">&gt;</span>
</pre>
</div>
<div class="slide" id="peeking-at-the-service">
<h1>Peeking at the Service</h1>
<p>Suds allows us to visually scan the service. Simply print the client object to
see what the service has to offer:</p>
<pre class="code python small literal-block">
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">geo_client</span>

<span class="n">Suds</span> <span class="p">(</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">fedorahosted</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">suds</span><span class="o">/</span> <span class="p">)</span>  <span class="n">version</span><span class="p">:</span> <span class="mf">0.4</span> <span class="n">GA</span>  <span class="n">build</span><span class="p">:</span> <span class="n">R699</span><span class="o">-</span><span class="mi">20100913</span>

<span class="n">Service</span> <span class="p">(</span> <span class="n">GeocoderService_V03_01</span> <span class="p">)</span> <span class="n">tns</span><span class="o">=</span><span class="s">&quot;https://geoservices.tamu.edu/&quot;</span>
   <span class="n">Prefixes</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
      <span class="n">ns0</span> <span class="o">=</span> <span class="s">&quot;https://geoservices.tamu.edu/&quot;</span>
   <span class="n">Ports</span> <span class="p">(</span><span class="mi">2</span><span class="p">):</span>
      <span class="p">(</span><span class="n">GeocoderService_V03_01Soap</span><span class="p">)</span>
      <span class="n">Methods</span> <span class="p">(</span><span class="mi">4</span><span class="p">):</span>
         <span class="o">...</span>
      <span class="n">Types</span> <span class="p">(</span><span class="mi">12</span><span class="p">):</span>
         <span class="o">...</span>
</pre>
</div>
<div class="slide" id="debugging-suds">
<h1>Debugging Suds</h1>
<p>Suds uses python logging to deal with debug information, so if you want to see
what's going on under the hood, you configure it via the Python logging
module:</p>
<pre class="code python literal-block">
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">logging</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">'suds.client'</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</pre>
<p class="incremental">This will allow us to see the messages sent and received by our client.</p>
</div>
<div class="slide" id="client-options">
<h1>Client Options</h1>
<p>SOAP Servers can provide more than one <em>service</em> and each <em>service</em> might have
more than one <em>port</em>. Suds provides two ways to configure which <em>service</em> and
<em>port</em> you wish to use.</p>
<p>Via subscription:</p>
<pre class="code python literal-block">
<span class="n">client</span><span class="o">.</span><span class="n">service</span><span class="p">[</span><span class="s">'&lt;service&gt;'</span><span class="p">][</span><span class="s">'&lt;port&gt;'</span><span class="p">]</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre>
<p>Or the way we will do it, via configuration:</p>
<pre class="code python literal-block">
<span class="n">geo_client</span><span class="o">.</span><span class="n">set_options</span><span class="p">(</span><span class="n">service</span><span class="o">=</span><span class="s">'GeocoderService_V03_01'</span><span class="p">,</span>
                       <span class="n">port</span><span class="o">=</span><span class="s">'GeocoderService_V03_01Soap'</span><span class="p">)</span>
</pre>
</div>
<div class="slide" id="providing-arguments">
<h1>Providing Arguments</h1>
<p>Arguments to a method are set up as a dictionary.  Although some may not be
required according to api documentation, it is safest to provide them all:</p>
<pre class="code python small literal-block">
<span class="n">apiKey</span> <span class="o">=</span> <span class="s">'&lt;fill this in&gt;'</span>
<span class="n">args</span> <span class="o">=</span> <span class="p">{</span><span class="s">'apiKey'</span><span class="p">:</span> <span class="n">apiKey</span><span class="p">,</span> <span class="p">}</span>
<span class="n">args</span><span class="p">[</span><span class="s">'streetAddress'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'1325 4th Avenue'</span>
<span class="n">args</span><span class="p">[</span><span class="s">'city'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'Seattle'</span>
<span class="n">args</span><span class="p">[</span><span class="s">'state'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'WA'</span>
<span class="n">args</span><span class="p">[</span><span class="s">'zip'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'98101'</span>
<span class="n">args</span><span class="p">[</span><span class="s">'version'</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.01</span>
<span class="n">args</span><span class="p">[</span><span class="s">'shouldReturnReferenceGeometry'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">args</span><span class="p">[</span><span class="s">'shouldNotStoreTransactionDetails'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">args</span><span class="p">[</span><span class="s">'shouldCalculateCensus'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">args</span><span class="p">[</span><span class="s">'censusYear'</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;TwoThousandTen&quot;</span>
</pre>
</div>
<div class="slide" id="making-the-call">
<h1>Making the Call</h1>
<p>Finally, once we've got the arguments all ready we can go ahead and make a call
to the server:</p>
<pre class="code python small literal-block">
<span class="o">&gt;&gt;&gt;</span> <span class="n">res</span> <span class="o">=</span> <span class="n">geo_client</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">GeocodeAddressNonParsed</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">)</span>
<span class="n">DEBUG</span><span class="p">:</span><span class="n">suds</span><span class="o">.</span><span class="n">client</span><span class="p">:</span><span class="n">sending</span> <span class="n">to</span>
<span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">geoservices</span><span class="o">.</span><span class="n">tamu</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="n">Services</span><span class="o">/</span><span class="n">Geocode</span><span class="o">/</span><span class="n">WebService</span><span class="o">/</span><span class="n">GeocoderService_V03_01</span><span class="o">.</span><span class="n">asmx</span><span class="p">)</span>
<span class="n">message</span><span class="p">:</span>
<span class="o">...</span>
</pre>
</div>
<div class="slide" id="what-does-it-look-like">
<h1>What does it look like?</h1>
<pre class="tiny literal-block">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;SOAP-ENV:Envelope xmlns:ns0=&quot;https://geoservices.tamu.edu/&quot; xmlns:ns1=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;
   &lt;SOAP-ENV:Header/&gt;
   &lt;ns1:Body&gt;
      &lt;ns0:GeocodeAddressNonParsed&gt;
         &lt;ns0:streetAddress&gt;1325 4th Avenue&lt;/ns0:streetAddress&gt;
         &lt;ns0:city&gt;Seattle&lt;/ns0:city&gt;
         &lt;ns0:state&gt;WA&lt;/ns0:state&gt;
         &lt;ns0:zip&gt;98101&lt;/ns0:zip&gt;
         &lt;ns0:apiKey&gt;a450a9181f85498598e21f8a39440e9a&lt;/ns0:apiKey&gt;
         &lt;ns0:version&gt;3.01&lt;/ns0:version&gt;
         &lt;ns0:shouldCalculateCensus&gt;false&lt;/ns0:shouldCalculateCensus&gt;
         &lt;ns0:censusYear&gt;TwoThousandTen&lt;/ns0:censusYear&gt;
         &lt;ns0:shouldReturnReferenceGeometry&gt;true&lt;/ns0:shouldReturnReferenceGeometry&gt;
         &lt;ns0:shouldNotStoreTransactionDetails&gt;true&lt;/ns0:shouldNotStoreTransactionDetails&gt;
      &lt;/ns0:GeocodeAddressNonParsed&gt;
   &lt;/ns1:Body&gt;
&lt;/SOAP-ENV:Envelope&gt;
</pre>
</div>
<div class="slide" id="and-the-reply">
<h1>And the Reply?</h1>
<pre class="tiny literal-block">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;
  &lt;soap:Body&gt;
    &lt;GeocodeAddressNonParsedResponse xmlns=&quot;https://geoservices.tamu.edu/&quot;&gt;
      &lt;GeocodeAddressNonParsedResult&gt;
        &lt;TransactionId&gt;6ef9c110-994c-4142-93d5-a55173526b64&lt;/TransactionId&gt;
        &lt;Latitude&gt;47.6084110119244&lt;/Latitude&gt;
        &lt;Longitude&gt;-122.3351592971042&lt;/Longitude&gt;
        &lt;Version&gt;3.01&lt;/Version&gt;
        &lt;Quality&gt;QUALITY_ADDRESS_RANGE_INTERPOLATION&lt;/Quality&gt;
        &lt;MatchedLocationType&gt;LOCATION_TYPE_STREET_ADDRESS&lt;/MatchedLocationType&gt;
        &lt;MatchType&gt;Exact&lt;/MatchType&gt;
        &lt;FeatureMatchingResultCount&gt;1&lt;/FeatureMatchingResultCount&gt;
        ...
        &lt;FArea&gt;2910.69420560356&lt;/FArea&gt;
        &lt;FAreaType&gt;Meters&lt;/FAreaType&gt;
        &lt;FGeometrySRID&gt;4269&lt;/FGeometrySRID&gt;
        &lt;FGeometry&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;&amp;lt;LineString xmlns=&quot;http://www.opengis.net/gml&quot;&amp;gt;&amp;lt;posList&amp;gt;-122.334868 47.608226 -122.335777 47.609219&amp;lt;/posList&amp;gt;&amp;lt;/LineString&amp;gt;&lt;/FGeometry&gt;
        ...
      &lt;/GeocodeAddressNonParsedResult&gt;
    &lt;/GeocodeAddressNonParsedResponse&gt;
  &lt;/soap:Body&gt;
&lt;/soap:Envelope&gt;
</pre>
</div>
<div class="slide" id="and-what-of-our-result">
<h1>And What of Our Result?</h1>
<p>The WSDL we started with should provide type definitions for both data we send
and results we receive. The <tt class="docutils literal">res</tt> symbol we bound to our result earlier
should now be an instance of a <em>GeocodeAddressNonParsedResult</em>. Lets see what
that looks like:</p>
<pre class="code python literal-block">
<span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="o">&lt;</span><span class="nb">type</span> <span class="s">'instance'</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">dir</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">[</span><span class="s">'CensusTimeTaken'</span><span class="p">,</span> <span class="s">'CensusYear'</span><span class="p">,</span> <span class="s">'ErrorMessage'</span><span class="p">,</span> <span class="s">'FArea'</span><span class="p">,</span>
 <span class="s">'FAreaType'</span><span class="p">,</span> <span class="s">'FCity'</span><span class="p">,</span> <span class="s">'FCounty'</span><span class="p">,</span> <span class="s">'FCountySubRegion'</span><span class="p">,</span>
 <span class="o">...</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">res</span><span class="o">.</span><span class="n">Latitude</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">Longitude</span>
<span class="p">(</span><span class="mf">47.608411011924403</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.3351592971042</span><span class="p">)</span>
</pre>
</div>
<div class="slide" id="a-word-on-debugging">
<h1>A Word on Debugging</h1>
<p class="center"><strong>blerg</strong></p>
<ul class="incremental simple">
<li>Messages sent to the server are long XML strings</li>
<li>Error messages are generally based on parsing errors in XML</li>
<li>These error messages can be quite cryptic:</li>
<li>&quot;There is an error in XML document (1, 572). ---&gt; The string '' is not a
valid Boolean value.'</li>
</ul>
<p class="incremental">Try this:</p>
<pre class="code python small incremental literal-block">
<span class="o">&gt;&gt;&gt;</span> <span class="n">geo_client</span><span class="o">.</span><span class="n">last_sent</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)[:</span><span class="mi">573</span><span class="p">]</span>
<span class="s">'...&lt;/ns0:version&gt;</span><span class="se">\n</span><span class="s">&lt;ns0:shouldCalculateCensus/&gt;'</span>
</pre>
</div>
</div>
</body>
</html>
